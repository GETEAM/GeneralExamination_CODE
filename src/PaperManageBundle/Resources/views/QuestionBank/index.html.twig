{% extends 'PaperManageBundle:QuestionBank:layout.html.twig' %}

{% block title %}试题库管理—试卷管理{% endblock %}

{% block loading %}正在加载年级信息列表……{% endblock %}

{% block stylesheets %}
    {{ parent() }}
    <link rel="stylesheet" href="{{ asset('css/common/editable-box.css') }}"/>
{% endblock %}

{% block right %}
    <h1>
       试题列表
    </h1>
  
    <div class="common-action">
        <a href="#" class="btn btn-common-action select-all">
            <input type="checkbox" hidden/>
            <i></i>
            全选
        </a>
        <a href="{{ path('grade_new') }}" class="btn btn-common-action">
            <img src="{{  asset('images/manage/add.png')  }}" width="20" height="20" alt="添加试题" title="添加试题">
            添加试题
        </a>
        <a href="javascript:void(0)" class="btn btn-common-action btn-multi-delete">
            <img src="{{  asset('images/manage/deletes.png')  }}" width="20" height="20" alt="批量删除" title="批量删除">
            批量删除
        </a>
    </div>

    <table class="common-table questions">
        <thead>
            <tr>
                <th>编号</th>
                <th>试题名</th>
                <th>类型</th>
                <th>时长</th>
                <th>操作</th>
            </tr>
        </thead>

        <tbody>
        {% if questions|length == 0 %}
            <tr>
                <td colspan="5">尚不存在试题，请您添加！</td>
            </tr>
        {% else %}
            {% for question in questions %}
                <tr>
                    <td>
                        <input type="checkbox" name="questions" value="{{ question.id }}" hidden/>
                        <a href="{{ path('question_show', { 'id': question.id }) }}">{{ question.id }}</a>
                    </td>
                    <td>{{ question.stem }}</td>
                    <td>{{ question.length }}</td>
                    <td>{{ question.preShow }}</td>
                    <td>
                        <a href="{{ path('question_show', { 'id': question.id }) }}">
                            <img src="{{  asset('images/manage/view.png')  }}" width="20" height="20" alt="预览试题" title="预览">
                        </a>
                        <a href="{{ path('question_edit', { 'id': question.id }) }}">
                            <img src="{{  asset('images/manage/edit.png')  }}" width="20" height="20" alt="编辑试题" title="编辑试题">
                        </a>
                        <a href="javascript:void(0)" class="delete-btn" question-id="{{ question.id }}">
                            <img src="{{  asset('images/manage/delete.png')  }}" width="20" height="20" alt="删除试题" title="删除试题">
                        </a>
                        <div id="delete-dialog_{{ question.id }}" class="delete-dialog" title="删除确认" question-id={{ question.id }} hidden>
                            <p>确定要删除   <span class="dialog-item-key">{{question.description}}</span>   年级信息吗？</p>
                        </div>
                    </td>
                </tr>
            {% endfor %}
        {% endif %}
        </tbody>
        <tfoot>
            <tr>
            <td colspan="5">
                {{ knp_pagination_render(questions) }}            
            </td>
            </tr>
        </tfoot>
    </table> 

    <!-- 批量删除对话框 -->
    <div class="multi-delete-dialog" title="批量删除确认" hidden>
        <p>确定要删除选中的年级信息吗？</p>
    </div>


    <div class="editable-box">
        <div class="editable-tools">
            <div class="editable-tool">B</div>
            <div class="editable-tool">I</div>
            <div class="editable-tool">U</div>
            <div class="editable-tool upload-image">上传图片</div>
            {{ form(upload_form) }}
        </div>
        <div class="editable-area" contenteditable="true">
            <img src="{{  asset('images/manage/delete.png')  }}" width="20" height="20" alt="删除年级信息" title="删除年级信息">
        </div>
    </div>

{% endblock %}

